/* 
 *  BLSlider v0.1.0
 *  https://github.com/hozakar/BLSlider
 *
 *  Copyright 2014, Hakan Ozakar <hozakar@gmail.com>
 *  http://beltslib.net
 *
 *  CC0 1.0 Universal Licence
 *  https://creativecommons.org/publicdomain/zero/1.0/
 */
!function(a){"use strict";function b(a){function b(a,b){a=a.split(":"),2===a.length&&(b[a[0].split(" ").join("")]=a[1])}var c={},d=["-webkit-","-moz-","-ms-","-o-",""];if(a){a=a.split(";");for(var e=0,f=a.length;f>e;e++)if(a[e])if(a[e].indexOf("-pre-")>-1)for(var g=0,f=d.length;f>g;g++){var h=a[e].replace(/-pre-/g,d[g]);b(h,c)}else b(a[e],c)}return c}function c(b,c){c=c||{},b.css(a.extend({position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",zIndex:9},c))}function d(b,d){var e={next:a('<div class="BLSlider-next-slide"></div>').appendTo(a(b).children(".BLSliderContainer")),current:a(b).find(".BLSlider-current-slide")};return c(e.current),c(e.next,d),e}function e(a,c,d,e,f){f?setTimeout(function(){a.current.animate(d,c),a.next.animate(e,c)},i/2):setTimeout(function(){a.current.css(d),a.next.css(e)},i/2),setTimeout(function(){a.current.remove(),a.next.attr("class","BLSlider-current-slide").css(b("-pre-transition : none"))},c)}var f={},g=999;navigator.appName.indexOf("Internet Explorer")>-1&&(g=parseInt(navigator.appVersion.split("MSIE ")[1].split(".")[0])),f.PrepDOM=function(b,c){this.el=b,this.params=c,a(b).data("style",b.getAttribute("style")),a(b).css("position")&&"static"!==a(b).css("position")||a(b).css("position","relative");var d=[];a(b).children().each(function(){d.push(a(this).clone()[0])}),this.slides=d,a(b).html('<div class="BLSliderContainer"></div>'),8>=g&&a(b).find(".BLSliderContainer").addClass("ie8"),a(b).find(".BLSliderContainer").css({position:"relative",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}),this.createControls(),this.startTracker()},f.PrepDOM.prototype.getSlides=function(){return this.slides},f.PrepDOM.prototype.kill=function(b,c){var d=this.el;for(h[c].stop(),d.setAttribute("style",a(d).data("style")||""),a(d).html("");b.length>0;)a(b.shift()).clone(!0).appendTo(d);h[c]=null,a(d).data("BLSliderControllerId",null),a(d).data("BLSliderSlides",null)},f.PrepDOM.prototype.createControls=function(){var b=this.el,c=this.params,d=a(b).children(".BLSliderContainer");if(c.autoPlay&&c.pauseOnHover&&d.hover(function(){a(b).BLSStop()}).mouseleave(function(){a(b).BLSPlay()}),"never"!==c.showNavigation||"never"!==c.showPagination){if("never"!==c.showNavigation&&(d.append('<div class="BLSlider-prev" data-role="prev"></div><div class="BLSlider-next" data-role="next"></div>'),"always"===c.showNavigation&&a(".BLSlider-prev, .BLSlider-next").addClass("show-always")),"never"!==c.showPagination){d.append('<div class="BLSlider-buttons"><ul class="BLSliderButtonList"></ul></div>');for(var e=0,f=this.slides.length;f>e;e++)d.find(".BLSliderButtonList").append('<li class="BLSliderControlButton" data-slide-id="'+e+'" data-role="moveTo"></li>');"always"===c.showPagination&&a(".BLSlider-buttons").addClass("show-always")}d.on("click",function(c){var d=c.toElement||c.relatedTarget||c.target||!1;if(!d)return!1;switch(a(d).data("role")){case"prev":a(b).BLSPrev();break;case"next":a(b).BLSNext();break;case"moveTo":var e=parseInt(a(d).data("slide-id"))||0;a(b).BLSMoveTo(e)}})}},f.PrepDOM.prototype.startTracker=function(){function b(){if(i.start.x){var b=i.move.x-i.start.x;if(b){var d=b/Math.abs(b);b=Math.abs(b);var e=i.move.t-i.start.t;b>k&&(d>0?a(j).BLSPrev():a(j).BLSNext(),c()),e>l&&c()}}}function c(){i={start:{},move:{}}}function d(a){var b=a.button===(8>=g?1:0);b&&(h(a),i.start={x:a.clientX||a.originalEvent.changedTouches[0].pageX,t:8>=g?+new Date:Date.now()})}function e(a){h(a),c()}function f(a){i.start.x&&(h(a),i.move={x:a.clientX||a.originalEvent.changedTouches[0].pageX,t:8>=g?+new Date:Date.now()},b())}function h(a){a.preventDefault?a.preventDefault():a.returnValue=!1}var i,j=this.el,k=50,l=100;c(),a(j).on("mousedown",d).on("mouseup",e).on("mousemove",f).on("touchstart",d).on("touchend",e).on("touchmove",f)},f.Timer=function(a,b){this.timerHandle=!1,this.el=a,this.params=b},f.Timer.prototype.open=function(){this.timerHandle&&clearInterval(this.timerHandle),this.timerHandle=!1;var b=this.el;this.timerHandle=setInterval(function(){a(b).BLSNext()},this.params.interval+this.params.duration)},f.Timer.prototype.close=function(){clearInterval(this.timerHandle),this.timerHandle=!1},f.Move=function(a,b){this.el=a,this.params=b,this.animType="slide",this.js=!1,10>g&&(this.js=!0),"undefined"!=typeof this[b.animation.toLowerCase()]&&(this.animType=b.animation.toLowerCase())},f.Move.prototype.to=function(b,d){function e(){var d=a(f).data("BLSliderSlides")[b],e=a(f).find(".BLSlider-current-slide");if(!e.length){var e=a('<div class="BLSlider-current-slide"></div>').appendTo(a(f).children(".BLSliderContainer"));return c(e),e.append(a(d).clone()),!0}return!1}var f=this.el,g=this.animType,h=this.params;if(!e()){var i=a(a(f).data("BLSliderSlides")[b]).data("animation")||this.animType;"undefined"!=typeof this[i.toLowerCase()]&&(g=i.toLowerCase());var j=this;setTimeout(function(){j[g](b,d)},h.delay)}},f.Move.prototype.execute=function(b,c){var f=this.el,g=this.params;"object"!=typeof c&&(c={}),c=a.extend({next:{before:{left:0},after:{left:0}},current:{after:{left:0}},trans:{}},c);var h=d(f,c.next.before);h.next.append(a(f).data("BLSliderSlides")[b]),this.js||(h.current.css(c.trans),h.next.css(c.trans)),e(h,g.interval,c.current.after,c.next.after,this.js)},f.Move.prototype.slide=function(a,c){var d=this.params,e={next:{before:{left:100*c+"%"},after:{left:0}},current:{after:{left:-100*c+"%"}},trans:arguments[2]?{}:b("-pre-transition : left "+d.interval+"ms "+d.easing)};this.execute(a,e)},f.Move.prototype.fade=function(a,c){var d=this.params,e={next:{before:{opacity:0,zIndex:9-c},after:{opacity:1}},current:{after:{opacity:0}},trans:arguments[2]?{}:b("-pre-transition : opacity "+d.interval+"ms "+d.easing)};this.execute(a,e)},f.Move.prototype.scale=function(a,c){var d=this.params,e={next:{before:b("opacity: 0; z-index: "+(9-c)+"; -pre-transform : scale("+(10-8*c)/10+")"),after:b("opacity: 1; -pre-transform: scale(1)")},current:{after:b("opacity: 0; -pre-transform: scale("+(10+6*c)/10+")")},trans:b("-pre-transition : -pre-transform "+d.interval+"ms "+d.easing+", opacity "+d.interval/1.25+"ms "+d.easing)};this.execute(a,e)};var h=[],i=100,j=function(b,c){var d=h.length,e=0,g=!1;c.onBeforeInit(a(b));var j=new f.PrepDOM(b,c),k=new f.Move(b,c),l=new f.Timer(b,c);this.slides=j.getSlides(),this.next=function(){var a=(e+1)%this.slides.length;this.moveTo(a,1)},this.prev=function(){var a=(e-1+this.slides.length)%this.slides.length;this.moveTo(a,-1)},this.moveTo=function(d,f){return g?!1:void(d===e&&a(b).find(".BLSlider-current-slide").length||(g=!0,c.onBeforeMove(a(b).find(".BLSlider-current-slide").children()),f=f||(d-e)/Math.max(1,Math.abs(d-e)),k.to(d,f),c.autoPlay&&this.play(),e=d,setTimeout(function(){g=!1,a(b).find(".BLSliderControlButton").removeClass("selected"),a(b).find(".BLSliderControlButton:nth-child("+(e+1)+")").addClass("selected"),c.onAfterMove(a(b).find(".BLSlider-current-slide").children())},c.interval+c.delay+i)))},this.play=function(){l.open()},this.stop=function(){l.close()},this.kill=function(){c.onBeforeKill(a(b)),j.kill(this.slides,d),c.onAfterKill(a(b))},a(b).data("BLSliderControllerId",d),a(b).data("BLSliderSlides",this.slides),c.onAfterInit(a(b)),this.moveTo(e)};a.fn.BLSlider=function(b){for(var c={interval:800,duration:8e3,delay:0,animation:"slide",easing:"ease-in-out",autoPlay:!0,pauseOnHover:!0,showNavigation:"hover",showPagination:"hover",onBeforeMove:function(){},onAfterMove:function(){},onBeforeInit:function(){},onAfterInit:function(){},onBeforeKill:function(){},onAfterKill:function(){}},d=a.extend(c,b),e=0,f=this.length;f>e;e++)"number"!=typeof a(this).data("BLSliderControllerId")&&h.push(new j(this[e],d));return this},f.validControllers=function(b,c,d){for(var e=[],f=0,g=b.length;g>f;f++){var i=a(b[f]).data("BLSliderControllerId");i>=0&&h[i]&&e.push(h[i])}for(var f=0,g=e.length;g>f;f++)e[f][c](d)},a.fn.BLSNext=function(){f.validControllers(this,"next")},a.fn.BLSPrev=function(){f.validControllers(this,"prev")},a.fn.BLSMoveTo=function(a){"undefined"!=typeof a&&f.validControllers(this,"moveTo",a)},a.fn.BLSPlay=function(){f.validControllers(this,"play")},a.fn.BLSStop=function(){f.validControllers(this,"stop")},a.fn.BLSKill=function(){f.validControllers(this,"kill")}}(jQuery);