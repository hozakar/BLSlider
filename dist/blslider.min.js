/* 
 *  BLSlider v0.1.0
 *  https://github.com/hozakar/BLSlider
 *
 *  Copyright 2014, Hakan Ozakar <hozakar@gmail.com>
 *  http://beltslib.net
 *
 *  CC0 1.0 Universal Licence
 *  https://creativecommons.org/publicdomain/zero/1.0/
 */
!function(a){"use strict";function b(a){function b(a,b){a=a.split(":"),2===a.length&&(b[a[0].split(" ").join("")]=a[1])}var c={},d=["-webkit-","-moz-","-ms-","-o-",""];if(a){a=a.split(";");for(var e=0,f=a.length;f>e;e++)if(a[e])if(a[e].indexOf("-pre-")>-1)for(var g=0,f=d.length;f>g;g++){var h=a[e].replace(/-pre-/g,d[g]);b(h,c)}else b(a[e],c)}return c}function c(b,c){c=c||{},b.css(a.extend({position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",zIndex:9},c))}function d(b,d){var e={next:a('<div class="BLSlider-next-slide"></div>').appendTo(a(b).children(".BLSliderContainer")),current:a(b).find(".BLSlider-current-slide")};return c(e.current),c(e.next,d),e}function e(a,c,d,e,f){f?setTimeout(function(){a.current.animate(d,c),a.next.animate(e,c)},j/2):setTimeout(function(){a.current.css(d),a.next.css(e)},j/2),setTimeout(function(){a.current.remove(),a.next.attr("class","BLSlider-current-slide").css(b("-pre-transition : none"))},c)}function f(b,c,d){for(var e=[],f=0,g=b.length;g>f;f++){var h=a(b[f]).data("BLSliderControllerId");h>=0&&i[h]&&e.push(i[h])}for(var f=0,g=e.length;g>f;f++)e[f][c](d)}var g={},h=999;navigator.appName.indexOf("Internet Explorer")>-1&&(h=parseInt(navigator.appVersion.split("MSIE ")[1].split(".")[0])),g.PrepDOM=function(b,c){function d(d){var e=a(b).children(".BLSliderContainer");if(c.autoPlay&&c.pauseOnHover&&e.hover(function(){a(b).BLSStop()}).mouseleave(function(){a(b).BLSPlay()}),"never"!==c.showNavigation||"never"!==c.showPagination){if("never"!==c.showNavigation&&(e.append('<div class="BLSlider-prev" data-role="prev"></div><div class="BLSlider-next" data-role="next"></div>'),"always"===c.showNavigation&&a(".BLSlider-prev, .BLSlider-next").addClass("show-always")),"never"!==c.showPagination){e.append('<div class="BLSlider-buttons"><ul class="BLSliderButtonList"></ul></div>');for(var f=0,g=d.length;g>f;f++)e.find(".BLSliderButtonList").append('<li class="BLSliderControlButton" data-slide-id="'+f+'" data-role="moveTo"></li>');"always"===c.showPagination&&a(".BLSlider-buttons").addClass("show-always")}e.click(function(c){var d=c.toElement||c.relatedTarget||c.target||!1;if(!d)return!1;switch(a(d).data("role")){case"prev":a(b).BLSPrev();break;case"next":a(b).BLSNext();break;case"moveTo":var e=parseInt(a(d).data("slide-id"))||0;a(b).BLSMoveTo(e)}})}}function e(){a(b).on("mousedown",j).on("mouseup",k).on("mousemove",l)}function f(){a(b).on("touchstart",j).on("touchend",k).on("touchmove",l)}function g(){var c={start:a(b).data("mouse-tracker-start"),movement:a(b).data("mouse-tracker-move")};if(c.start.x){var d=c.movement.x-c.start.x;if(d){var e=d/Math.abs(d);d=Math.abs(d);var f=c.movement.t-c.start.t;d>50&&(e>0?a(b).BLSPrev():a(b).BLSNext(),i()),f>150&&i()}}}function i(){a(b).data("mouse-tracker-start",{}),a(b).data("mouse-tracker-move",{})}function j(c){var d=c.button===(8>=h?1:0);if(d){c.preventDefault();var e={x:c.clientX||c.originalEvent.changedTouches[0].pageX,t:8>=h?+new Date:Date.now()};a(b).data("mouse-tracker-start",e)}}function k(a){a.preventDefault(),i()}function l(c){if(a(b).data("mouse-tracker-start").x){c.preventDefault();var d={x:c.clientX||c.originalEvent.changedTouches[0].pageX,t:8>=h?+new Date:Date.now()};a(b).data("mouse-tracker-move",d),g()}}this.el=b,a(b).data("style",b.getAttribute("style")),a(b).css("position")&&"static"!==a(b).css("position")||a(b).css("position","relative");var m=[];a(b).children().each(function(){m.push(a(this).clone()[0])}),this.slides=m,a(b).html('<div class="BLSliderContainer"></div>'),8>=h&&a(b).find(".BLSliderContainer").addClass("ie8"),a(b).find(".BLSliderContainer").css({position:"relative",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}),d(m),i(),e(),f()},g.PrepDOM.prototype.getSlides=function(){return this.slides},g.PrepDOM.prototype.kill=function(b,c){var d=this.el;for(i[c].stop(),d.setAttribute("style",a(d).data("style")||""),a(d).html("");b.length>0;)a(b.shift()).clone(!0).appendTo(d);i[c]=null,a(d).data("BLSliderControllerId",null),a(d).data("BLSliderSlides",null)},g.Timer=function(a,b){this.timerHandle=!1,this.el=a,this.params=b},g.Timer.prototype.open=function(){this.timerHandle&&clearInterval(this.timerHandle),this.timerHandle=!1;var b=this.el;this.timerHandle=setInterval(function(){a(b).BLSNext()},this.params.interval+this.params.duration)},g.Timer.prototype.close=function(){clearInterval(this.timerHandle),this.timerHandle=!1},g.Move=function(a,b){this.el=a,this.params=b,this.animType="slide",this.animPrefix="",10>h&&(this.animPrefix="js"),this.animType=this.animPrefix+this.animType,"undefined"!=typeof this[this.animPrefix+b.animation.toLowerCase()]&&(this.animType=this.animPrefix+b.animation.toLowerCase())},g.Move.prototype.to=function(b,d){function e(){var d=a(f).data("BLSliderSlides")[b],e=a(f).find(".BLSlider-current-slide");if(!e.length){var e=a('<div class="BLSlider-current-slide"></div>').appendTo(a(f).children(".BLSliderContainer"));return c(e),e.append(a(d).clone()),!0}return!1}var f=this.el,g=this.animType,h=this.params;if(!e()){var i=a(a(f).data("BLSliderSlides")[b]).data("animation")||"";i&&(i=this.animPrefix+i),"undefined"!=typeof this[i.toLowerCase()]&&(g=i.toLowerCase());var j=this;setTimeout(function(){j[g](b,d)},h.delay)}},g.Move.prototype.execute=function(b,c){var f=this.el,g=this.params;"object"!=typeof c&&(c={}),c=a.extend({next:{before:{left:0},after:{left:0}},current:{after:{left:0}},trans:{}},c);var h=d(f,c.next.before);h.next.append(a(f).data("BLSliderSlides")[b]),h.current.css(c.trans),h.next.css(c.trans),e(h,g.interval,c.current.after,c.next.after,arguments[2])},g.Move.prototype.slide=function(a,c){var d=this.params,e={next:{before:{left:100*c+"%"},after:{left:0}},current:{after:{left:-100*c+"%"}},trans:b("-pre-transition : left "+d.interval+"ms "+d.easing)};this.execute(a,e,arguments[2])},g.Move.prototype.jsslide=function(a,b){this.slide(a,b,!0)},g.Move.prototype.fade=function(a,c){var d=this.params,e={next:{before:{opacity:0,zIndex:9-c},after:{opacity:1}},current:{after:{opacity:0}},trans:b("-pre-transition : opacity "+d.interval+"ms "+d.easing)};this.execute(a,e,arguments[2])},g.Move.prototype.jsfade=function(a,b){this.fade(a,b,!0)},g.Move.prototype.scale=function(a,c){var d=this.params,e={next:{before:b("opacity: 0; z-index: "+(9-c)+"; -pre-transform : scale("+(10-8*c)/10+")"),after:b("opacity: 1; -pre-transform: scale(1)")},current:{after:b("opacity: 0; -pre-transform: scale("+(10+6*c)/10+")")},trans:b("-pre-transition : -pre-transform "+d.interval+"ms "+d.easing+", opacity "+d.interval/1.25+"ms "+d.easing)};this.execute(a,e)};var i=[],j=100,k=function(b,c){var d=i.length,e=0,f=!1;c.onBeforeInit(a(b));var h=new g.PrepDOM(b,c),k=new g.Move(b,c),l=new g.Timer(b,c);this.slides=h.getSlides(),this.next=function(){var a=(e+1)%this.slides.length;this.moveTo(a,1)},this.prev=function(){var a=(e-1+this.slides.length)%this.slides.length;this.moveTo(a,-1)},this.moveTo=function(d,g){return f?!1:void(d===e&&a(b).find(".BLSlider-current-slide").length||(f=!0,c.onBeforeMove(a(b).find(".BLSlider-current-slide").children()),g=g||(d-e)/Math.max(1,Math.abs(d-e)),k.to(d,g),c.autoPlay&&this.play(),e=d,setTimeout(function(){f=!1,a(b).find(".BLSliderControlButton").removeClass("selected"),a(b).find(".BLSliderControlButton:nth-child("+(e+1)+")").addClass("selected"),c.onAfterMove(a(b).find(".BLSlider-current-slide").children())},c.interval+c.delay+j)))},this.play=function(){l.open()},this.stop=function(){l.close()},this.kill=function(){c.onBeforeKill(a(b)),h.kill(this.slides,d),c.onAfterKill(a(b))},a(b).data("BLSliderControllerId",d),a(b).data("BLSliderSlides",this.slides),c.onAfterInit(a(b)),this.moveTo(e)};a.fn.BLSlider=function(b){for(var c={interval:800,duration:8e3,delay:0,animation:"slide",easing:"ease-in-out",autoPlay:!0,pauseOnHover:!0,showNavigation:"hover",showPagination:"hover",onBeforeMove:function(){},onAfterMove:function(){},onBeforeInit:function(){},onAfterInit:function(){},onBeforeKill:function(){},onAfterKill:function(){}},d=a.extend(c,b),e=0,f=this.length;f>e;e++)"number"!=typeof a(this).data("BLSliderControllerId")&&i.push(new k(this[e],d));return this},a.fn.BLSNext=function(){f(this,"next")},a.fn.BLSPrev=function(){f(this,"prev")},a.fn.BLSMoveTo=function(a){"undefined"!=typeof a&&f(this,"moveTo",a)},a.fn.BLSPlay=function(){f(this,"play")},a.fn.BLSStop=function(){f(this,"stop")},a.fn.BLSKill=function(){f(this,"kill")}}(jQuery);