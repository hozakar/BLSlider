/* 
 *  BLSlider v0.1.0
 *  https://github.com/hozakar/BLSlider
 *
 *  Copyright 2014, Hakan Ozakar <hozakar@gmail.com>
 *  http://beltslib.net
 *
 *  CC0 1.0 Universal Licence
 *  https://creativecommons.org/publicdomain/zero/1.0/
 */
!function(a){"use strict";function b(b){for(var c=[],d=0,e=b.length;e>d;d++){var f=a(b[d]).data("BLSliderControllerId");f>=0&&h[f]&&c.push(h[f])}return c}function c(a){function b(a,b){a=a.split(":"),2===a.length&&(b[a[0].split(" ").join("")]=a[1])}var c={},d=["-webkit-","-moz-","-ms-","-o-",""];if(a){a=a.split(";");for(var e=0,f=a.length;f>e;e++)if(a[e])if(a[e].indexOf("-pre-")>-1)for(var g=0,f=d.length;f>g;g++){var h=a[e].replace(/-pre-/g,d[g]);b(h,c)}else b(a[e],c)}return c}function d(b,c){c=c||{},b.css(a.extend({position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",zIndex:9},c))}function e(b,c){var e={next:a('<div class="BLSlider-next-slide"></div>').appendTo(a(b).children(".BLSliderContainer")),current:a(b).find(".BLSlider-current-slide")};return d(e.current),d(e.next,c),e}function f(a,b,d,e){setTimeout(function(){a.current.css(d),a.next.css(e)},i/2),setTimeout(function(){a.current.remove(),a.next.attr("class","BLSlider-current-slide").css(c("-pre-transition : none"))},b)}var g={},h=[],i=100,j=function(b,c){var d=h.length,e=e||0,f=!1;c.onBeforeInit(a(b));var j=new g.PrepDOM(b,c),k=new g.Move(b,c),l=new g.Timer(this);this.slides=j.init(),this.next=function(){var a=(e+1)%this.slides.length;return this.moveTo(a,1)},this.prev=function(){var a=(e-1+this.slides.length)%this.slides.length;return this.moveTo(a,-1)},this.moveTo=function(d,g){return f?!1:d===e&&a(b).find(".BLSlider-current-slide").length?d:(f=!0,c.onBeforeMove(a(b).find(".BLSlider-current-slide").children()),g=g||(d-e)/Math.max(1,Math.abs(d-e)),k.init(d,g),c.autoPlay&&this.play(),e=d,setTimeout(function(){f=!1,a(b).find(".BLSliderControlButton").removeClass("selected"),a(b).find(".BLSliderControlButton:nth-child("+(e+1)+")").addClass("selected"),c.onAfterMove(a(b).find(".BLSlider-current-slide").children())},c.interval+c.delay+i),d)},this.play=function(){return l.open(c)},this.stop=function(){return l.close()},this.kill=function(){c.onBeforeKill(a(b));var e=j.kill(this.slides,d);return c.onAfterKill(a(b)),e},a(b).data("BLSliderControllerId",d),a(b).data("BLSliderSlides",this.slides),c.onAfterInit(a(b)),this.moveTo(e)};a.fn.BLSlider=function(b){for(var c={interval:800,duration:8e3,delay:0,animation:"slide",easing:"cubic-bezier(.5,1.1,.5,1.1)",autoPlay:!0,pauseOnHover:!0,navigation:!0,pagination:!0,onBeforeMove:function(){},onAfterMove:function(){},onBeforeInit:function(){},onAfterInit:function(){},onBeforeKill:function(){},onAfterKill:function(){}},d=a.extend(c,b),e=0,f=this.length;f>e;e++)h.push(new j(this[e],d));return this},a.fn.BLSNext=function(){for(var a=b(this),c=[],d=0,e=a.length;e>d;d++)c.push(a[d].next());return c},a.fn.BLSPrev=function(){for(var a=b(this),c=[],d=0,e=a.length;e>d;d++)c.push(a[d].prev());return c},a.fn.BLSMoveTo=function(a){a=parseInt(a)||0;for(var c=[],d=b(this),e=0,f=d.length;f>e;e++)c.push(d[e].moveTo(a));return c},a.fn.BLSPlay=function(){for(var a=b(this),c=!0,d=0,e=a.length;e>d;d++)c=a[d].play()?c&&!0:!1;return c},a.fn.BLSStop=function(){for(var a=b(this),c=!0,d=0,e=a.length;e>d;d++)c=a[d].stop()?c&&!0:!1;return c},a.fn.BLSKill=function(){for(var a=b(this),c=!0,d=0,e=a.length;e>d;d++)c=a[d].kill()?c&&!0:!1;return c},g.PrepDOM=function(b,c){function d(d){var e=a(b).children(".BLSliderContainer");if(c.autoPlay&&c.pauseOnHover&&e.hover(function(){a(b).BLSStop()}).mouseleave(function(){a(b).BLSPlay()}),c.navigation||c.pagination){if(c.navigation&&e.append('<div class="BLSlider-prev" data-role="prev"></div><div class="BLSlider-next" data-role="next"></div>'),c.pagination){e.append('<div class="BLSlider-buttons"><ul class="BLSliderButtonList"></ul></div>');for(var f=0,g=d.length;g>f;f++)e.find(".BLSliderButtonList").append('<li class="BLSliderControlButton" data-slide-id="'+f+'" data-role="moveTo"></li>')}e.click(function(c){c=c||event;var d=c.toElement||c.relatedTarget||c.target||!1;if(!d)return!1;switch(a(d).data("role")){case"prev":a(b).BLSPrev();break;case"next":a(b).BLSNext();break;case"moveTo":var e=parseInt(a(d).data("slide-id"))||0;a(b).BLSMoveTo(e)}})}}function e(){a(b).on("mousedown",j).on("mouseup",k).on("mousemove",l)}function f(){a(b).on("touchstart",j).on("touchend",k).on("touchmove",l)}function g(){var c={start:a(b).data("mouse-tracker-start"),movement:a(b).data("mouse-tracker-move")};if(c.start.x){var d=c.movement.x-c.start.x;if(d){var e=d/Math.abs(d);d=Math.abs(d);var f=c.movement.t-c.start.t;d>50&&(e>0?a(b).BLSPrev():a(b).BLSNext(),i()),f>150&&i()}}}function i(){a(b).data("mouse-tracker-start",{}),a(b).data("mouse-tracker-move",{})}function j(c){if(c=c||event,0===c.button){c.preventDefault();var d={x:c.pageX||c.changedTouches[0].pageX,t:Date.now()};a(b).data("mouse-tracker-start",d)}}function k(a){a=a||event,a.preventDefault(),i()}function l(c){if(c=c||event,a(b).data("mouse-tracker-start").x){c.preventDefault();var d={x:c.pageX||c.changedTouches[0].pageX,t:Date.now()};a(b).data("mouse-tracker-move",d),g()}}this.init=function(){a(b).data("width",b.style.width),a(b).data("height",b.style.height),a(b).data("position",b.style.position),a(b).data("overflow",b.style.overflow),a(b).css("position")&&"static"!=a(b).css("position")||a(b).css("position","relative");var c=[];return a(b).children().each(function(){c.push(a(this).clone()[0])}),a(b).html('<div class="BLSliderContainer"></div>'),a(b).find(".BLSliderContainer").css({position:"relative",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}),d(c),i(),e(),f(),c},this.kill=function(c,d){h[d].stop(),a(b).css({position:a(b).data("position"),width:a(b).data("width"),height:a(b).data("height"),overflow:a(b).data("overflow")}),a(b).html("");for(var e=c.length;c.length>0;)a(c.shift()).clone(!0).appendTo(b);return h[d]=null,a(b).data("BLSliderControllerId",null),a(b).data("BLSliderSlides",null),e===a(b).children().length}},g.Timer=function(a){var b=!1;this.open=function(c){return b&&clearInterval(b),b=!1,b=setInterval(function(){a.next()},c.interval+c.duration)},this.close=function(){return clearInterval(b),b=!1,!0}},g.Move=function(b,c){function e(b,c){var e=a(b).data("BLSliderSlides")[c],f=a(b).find(".BLSlider-current-slide");if(!f.length){var f=a('<div class="BLSlider-current-slide"></div>').appendTo(a(b).children(".BLSliderContainer"));return d(f),f.append(a(e).clone()),!0}return!1}var f=["slide","fade","scale","turn"];this.init=function(a,d){var h="slide";if(-1!==f.indexOf(c.animation.toLowerCase())&&(h=c.animation.toLowerCase()),!e(b,a)){var i=new g[h](b,d,c);setTimeout(function(){i.init(a)},c.delay)}}},g.slide=function(b,d,g){this.init=function(h){var i=e(b,{left:100*d+"%"});i.next.append(a(b).data("BLSliderSlides")[h]);var j=c("-pre-transition : left "+g.interval+"ms "+g.easing);i.current.css(j),i.next.css(j);var k={left:-100*d+"%"},l={left:0};f(i,g.interval,k,l)}},g.fade=function(b,d,g){this.init=function(h){var i=e(b,{opacity:0,zIndex:9-d});i.next.append(a(b).data("BLSliderSlides")[h]);var j=c("-pre-transition : opacity "+g.interval+"ms "+g.easing);i.current.css(j),i.next.css(j);var k={opacity:0},l={opacity:1};f(i,g.interval,k,l)}},g.scale=function(b,d,g){this.init=function(h){var i=c("opacity: 0; z-index: "+(9-d)+"; -pre-transform : scale("+(10-8*d)/10+")"),j=e(b,i);j.next.append(a(b).data("BLSliderSlides")[h]);var k=c("-pre-transition : -pre-transform "+g.interval+"ms "+g.easing+", opacity "+g.interval/1.25+"ms "+g.easing);j.current.css(k),j.next.css(k);var l=c("opacity: 0; -pre-transform: scale("+(10+6*d)/10+")"),m=c("opacity: 1; -pre-transform: scale(1)");f(j,g.interval,l,m)}},g.turn=function(b,d,g){this.init=function(h){var i=c("opacity: 0; z-index: "+(9-d)+"; -pre-transform: scale(.2) rotateZ(0deg)"),j=e(b,i);j.next.append(a(b).data("BLSliderSlides")[h]);var k=c("-pre-transition : -pre-transform "+g.interval+"ms "+g.easing+", opacity "+g.interval/1.25+"ms "+g.easing);j.current.css(k),j.next.css(k);var l=c("opacity: 0;"),m=c("opacity: 1; -pre-transform: scale(1) rotateZ("+(0+360*d)+"deg)");f(j,g.interval,l,m)}}}(jQuery);